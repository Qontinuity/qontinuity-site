---
const { categories = [] } = Astro.props;
---

<section class="px-4 md:px-8 lg:px-12 my-16 grid gap-8 md:grid-cols-2 lg:grid-cols-3">
  {categories.map((cat) => {
    // Extrait seulement le premier paragraphe
    const teaserHtml = cat.descriptionHtml
      ? cat.descriptionHtml.split('</p>')[0] + '</p>'
      : '<p>Aucune description disponible.</p>';

    return (
      <a
        key={cat.id}
        href={`/categorie/${cat.slug}`}
        class="block border rounded-xl p-6 hover:shadow-lg transition"
      >
        <h2 class="text-xl font-bold mb-2">{cat.nom}</h2>

        {/* Petit aperçu de la description */}
        <div
          class="text-sm text-zinc-600 prose mb-4"
          set:html={teaserHtml}
        />

        <span class="text-indigo-600 font-medium">Voir les formations →</span>
      </a>
    );
  })}
</section>

